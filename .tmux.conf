######################
### DESIGN CHANGES ###
######################
unbind C-b
## Plugins : 
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'dracula/tmux'

set -g @plugin 'tmux-plugins/tmux-sensible' # sensible settings everyone can agree on (hopefully)
set -g @plugin 'tmux-plugins/tmux-resurrect' # persist tmux environment across system restarts
set -g @plugin 'tmux-plugins/tmux-continuum' # continuous saving of tmux environment
set -g @plugin 'tmux-plugins/tmux-prefix-highlight' # highlights when you press tmux prefix key

set -g @dracula-show-powerline true
set -g @dracula-show-flags true 
set -g @dracula-show-left-icon session
set -g @dracula-plugins "time"
#
set -g @dracula-show-empty-plugins true
set -g @dracula-show-edge-icons false
set -g @dracula-border-contrast true
set -g @dracula-show-left-icon "\ue795 | #h"

set -g @dracula-colors "
# simple tomorrow night color palette
foreground='#c5c8c6'
background='#1d1f21'
highlight='#373b41'
status_line='#282a2e'
comment='#969896'
red='#cc6666'
orange='#de935f'
yellow='#f0c674'
green='#b5bd68'
aqua='#8abeb7'
blue='#81a2be'
purple='#b294bb'
pane='#4d5057'
"

#set -g default-terminal 'screen-256color'
set -g base-index 1
setw -g pane-base-index 1

set -g set-titles off          # set terminal title
set -g set-clipboard on
set-option -g prefix C-a
bind-key C-a send-prefix
# loud or quiet?
set-option -g allow-rename off

set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
setw -g monitor-activity off
set -g bell-action none

#  modes
setw -g clock-mode-colour colour5
setw -g mode-style 'fg=colour1 bg=colour18 bold'

# panes
set -g pane-border-style 'fg=colour19 bg=colour0'
set -g pane-active-border-style 'bg=colour0 fg=colour9'

# statusbar
set -g status-position top
set -g status-justify left
set -g mouse on

# sane scrolling:
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e; send-keys -M'"
set-option -g history-limit 50000
set -g pane-border-status off
#run -b '/usr/share/tmux-plugin-manager/tpm'
run -b '/usr/share/tmux-plugin-manager/tpm'


## Try rebind keys

bind-key -T root MouseDown3Pane paste-buffer
bind-key -T root C-MouseDown3Pane if-shell -F -t = "#{||:#{mouse_any_flag},#{&&:#{pane_in_mode},#{?#{m/r:(copy|view)-mode,#{pane_mode}},0,1}}}" "select-pane -t= ; send -M" "display-menu -t= -xM -yM -T \"#[align=centre]#{pane_index} (#{pane_id})\" \"#{?#{m/r:(copy|view)-mode,#{pane_mode}},Go To Top,}\" < \"send -X history-top\" \"#{?#{m/r:(copy|view)-mode,#{pane_mode}},Go To Bottom,}\" > \"send -X history-bottom\" '' \"#{?mouse_word,Search For #[underscore]#{=/9/...:mouse_word},}\" C-r \"if -F \\\"#{?#{m/r:(copy|view)-mode,#{pane_mode}},0,1}\\\" \\\"copy-mode -t=\\\" ; send -Xt= search-backward \\\"#{q:mouse_word}\\\"\" \"#{?mouse_word,Type #[underscore]#{=/9/...:mouse_word},}\" C-y \"copy-mode -q ; send-keys -l -- \\\"#{q:mouse_word}\\\"\" \"#{?mouse_word,Copy #[underscore]#{=/9/...:mouse_word},}\" c \"copy-mode -q ; set-buffer -- \\\"#{q:mouse_word}\\\"\" \"#{?mouse_line,Copy Line,}\" l \"copy-mode -q ; set-buffer -- \\\"#{q:mouse_line}\\\"\" '' \"Horizontal Split\" h \"split-window -h\" \"Vertical Split\" v \"split-window -v\" '' \"#{?#{>:#{window_panes},1},,-}Swap Up\" u \"swap-pane -U\" \"#{?#{>:#{window_panes},1},,-}Swap Down\" d \"swap-pane -D\" \"#{?pane_marked_set,,-}Swap Marked\" s swap-pane '' Kill X kill-pane Respawn R \"respawn-pane -k\" \"#{?pane_marked,Unmark,Mark}\" m \"select-pane -m\" \"#{?#{>:#{window_panes},1},,-}#{?window_zoomed_flag,Unzoom,Zoom}\" z \"resize-pane -Z\""

bind-key -T root C-Pageup previous-window
bind-key -T root C-Pagedown next-window

#bind-key -T prefix s new-window -n "Open SSH" /home/leons/.bash/tmux-ssh.sh
bind-key -T prefix s display-popup -T "Select Host" -E "/home/leons/.bash/tmux-ssh.sh"

set-option -sa terminal-overrides ",xterm*:Tc"
